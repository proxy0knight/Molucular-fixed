# محاكي الهياكل الجزيئية والذرية ثلاثي الأبعاد

## نظرة عامة

هذا المشروع عبارة عن بيئة تفاعلية ثلاثية الأبعاد لمحاكاة الهياكل الجزيئية والذرية باستخدام HTML وCSS وJavaScript مع مكتبة Three.js. يوفر النظام فيزياء التصادم المتقدمة وواجهة مستخدم شاملة للتحكم في الذرات والجزيئات.

## الميزات الرئيسية

### نظام الذرات
- **خصائص متقدمة**: كل ذرة لها وزن، شحنة، عدد روابط، ونوع عنصر
- **فيزياء واقعية**: تصادمات مرنة، قوى فان دير فالس، قوى كهروستاتيكية
- **تتبع فريد**: كل ذرة لها معرف فريد وعلامة مخفية للتتبع
- **خصائص قابلة للتعديل**: يمكن تحديث جميع خصائص الذرة في الوقت الفعلي

### نظام الجزيئات
- **تجميع ذكي**: تجميع الذرات في هياكل جزيئية معقدة
- **روابط كيميائية**: دعم أنواع مختلفة من الروابط (أحادية، ثنائية، ثلاثية، عطرية)
- **قوالب جاهزة**: جزيئات شائعة مثل الماء والميثان والبنزين
- **حساب تلقائي**: حساب الوزن الجزيئي والصيغة الكيميائية تلقائياً

### محرك الفيزياء
- **تصادمات واقعية**: نظام تصادم متقدم مع حفظ الطاقة
- **قوى متعددة**: جاذبية، قوى كهروستاتيكية، روابط كيميائية
- **حدود العالم**: منع الذرات من الخروج من منطقة المحاكاة
- **تحسين الأداء**: شبكة مكانية لتحسين حسابات التصادم

### واجهة المستخدم
- **تحكم شامل**: إضافة، حذف، تعديل الذرات والجزيئات
- **قائمة تفاعلية**: عرض جميع الذرات مع إمكانية التحديد والتركيز
- **أدوات الكاميرا**: تحكم كامل في الكاميرا مع إعادة التعيين والتركيز
- **إعدادات الفيزياء**: تحكم في الجاذبية وقوة الروابط والمقاومة

## هيكل المشروع

```
molecular-3d-environment/
├── index.html              # الملف الرئيسي
├── css/
│   └── style.css          # تنسيقات واجهة المستخدم
├── js/
│   ├── atom.js            # فئة الذرة
│   ├── molecule.js        # فئة الجزيء وقوالب الجزيئات
│   ├── physics.js         # محرك الفيزياء
│   ├── renderer.js        # محرك العرض ثلاثي الأبعاد
│   ├── ui.js              # إدارة واجهة المستخدم
│   └── main.js            # النظام الرئيسي
└── README.md              # هذا الملف
```

## كيفية التشغيل

### المتطلبات
- متصفح ويب حديث يدعم WebGL
- خادم ويب محلي (لتجنب قيود CORS)

### خطوات التشغيل

1. **تحميل المشروع**
   ```bash
   # إذا كان لديك git
   git clone [repository-url]
   cd molecular-3d-environment
   ```

2. **تشغيل خادم محلي**
   ```bash
   # باستخدام Python 3
   python3 -m http.server 8000
   
   # أو باستخدام Python 2
   python -m SimpleHTTPServer 8000
   
   # أو باستخدام Node.js
   npx http-server
   ```

3. **فتح التطبيق**
   - افتح متصفحك واذهب إلى: `http://localhost:8000`

## دليل الاستخدام

### الأزرار الرئيسية
- **إضافة ذرة**: إضافة ذرة عشوائية إلى المشهد
- **إضافة جزيء**: اختيار وإضافة جزيء من القوالب المتاحة
- **مسح الكل**: حذف جميع الذرات والجزيئات
- **تشغيل/إيقاف**: تشغيل أو إيقاف المحاكاة

### التحكم في الكاميرا
- **الماوس الأيسر + السحب**: دوران الكاميرا
- **عجلة الماوس**: تكبير/تصغير
- **الماوس الأيمن + السحب**: تحريك الكاميرا
- **إعادة تعيين الكاميرا**: العودة إلى الموضع الافتراضي
- **التركيز على المحدد**: توجيه الكاميرا نحو الكائن المحدد

### تحديد وتعديل الذرات
1. انقر على أي ذرة في المشهد لتحديدها
2. ستظهر معلومات الذرة في لوحة "خصائص الذرة المحددة"
3. يمكنك تعديل الوزن، عدد الروابط، الشحنة، والنوع
4. انقر "تحديث الخصائص" لتطبيق التغييرات

### إعدادات الفيزياء
- **الجاذبية**: تحكم في قوة الجاذبية (0-2)
- **قوة الرابطة**: تحكم في قوة الروابط الكيميائية (0-5)
- **المقاومة**: تحكم في مقاومة الحركة (0-1)

### اختصارات لوحة المفاتيح
- **مسافة**: تشغيل/إيقاف المحاكاة
- **Ctrl+A**: إضافة ذرة عشوائية
- **Ctrl+M**: فتح قائمة الجزيئات
- **Delete**: حذف الكائن المحدد
- **R**: إعادة تعيين الكاميرا
- **F**: التركيز على المحدد
- **L**: تبديل عرض التسميات
- **Ctrl+Shift+C**: مسح جميع الكائنات

## الجزيئات المتاحة

### الماء (H₂O)
- جزيء بسيط يتكون من ذرة أكسجين وذرتي هيدروجين
- زاوية الرابطة: ~104.5 درجة

### الميثان (CH₄)
- جزيء يتكون من ذرة كربون و4 ذرات هيدروجين
- هندسة رباعية السطوح

### البنزين (C₆H₆)
- حلقة عطرية من 6 ذرات كربون مع 6 ذرات هيدروجين
- روابط متناوبة أحادية وثنائية

## الميزات المتقدمة

### وحدة التحكم للمطورين
يمكن استخدام الأوامر التالية في وحدة تحكم المتصفح:

```javascript
// إضافة 10 ذرات عشوائية
addRandomAtoms(10);

// إنشاء انفجار في الموقع (0,0,0) بقوة 5 ونصف قطر 3
explodeAt(0, 0, 0, 5, 3);

// عرض إحصائيات النظام
getStats();

// الوصول إلى النظام الرئيسي
window.molecularSystem
```

### حفظ وتحميل الحالة
- يتم حفظ حالة النظام تلقائياً في التخزين المحلي
- عند إعادة تحميل الصفحة، سيتم السؤال عن استعادة الحالة المحفوظة

### تحسين الأداء
- استخدام شبكة مكانية لتحسين حسابات التصادم
- تحديد عدد الإطارات في الثانية (FPS) في شريط الحالة
- حد أقصى للذرات (1000) والجزيئات (100) لضمان الأداء

## التقنيات المستخدمة

- **HTML5**: هيكل الصفحة
- **CSS3**: تنسيق واجهة المستخدم مع تأثيرات متقدمة
- **JavaScript ES6+**: منطق التطبيق
- **Three.js**: محرك الرسوميات ثلاثية الأبعاد
- **WebGL**: تسريع الرسوميات بالأجهزة

## المتطلبات التقنية

### الحد الأدنى
- متصفح يدعم WebGL 1.0
- ذاكرة وصول عشوائي: 2 جيجابايت
- معالج رسوميات متكامل

### الموصى به
- متصفح حديث يدعم WebGL 2.0
- ذاكرة وصول عشوائي: 4 جيجابايت أو أكثر
- بطاقة رسوميات منفصلة

## استكشاف الأخطاء

### المشاكل الشائعة

1. **الشاشة سوداء**
   - تأكد من أن متصفحك يدعم WebGL
   - تحقق من وحدة التحكم للأخطاء

2. **لا تظهر الذرات**
   - تأكد من تشغيل الخادم المحلي
   - تحقق من عدم وجود أخطاء CORS

3. **أداء بطيء**
   - قلل عدد الذرات في المشهد
   - أغلق التطبيقات الأخرى المستهلكة للذاكرة

### رسائل الخطأ الشائعة

- **"Access to script blocked by CORS policy"**
  - الحل: استخدم خادم ويب محلي بدلاً من فتح الملف مباشرة

- **"WebGL not supported"**
  - الحل: استخدم متصفح حديث أو فعّل دعم WebGL

## التطوير والتخصيص

### إضافة عناصر جديدة
يمكن إضافة عناصر كيميائية جديدة في ملف `atom.js`:

```javascript
const elementColors = {
    'H': 0xffffff,  // أبيض
    'C': 0x404040,  // رمادي
    'YourElement': 0xcolor  // لونك المخصص
};
```

### إضافة جزيئات جديدة
يمكن إضافة قوالب جزيئات جديدة في فئة `MoleculeTemplates` في ملف `molecule.js`.

### تخصيص الفيزياء
يمكن تعديل معاملات الفيزياء في ملف `physics.js` لتغيير سلوك المحاكاة.

## الترخيص

هذا المشروع مفتوح المصدر ومتاح للاستخدام التعليمي والبحثي.

## المساهمة

نرحب بالمساهمات! يرجى:
1. عمل Fork للمشروع
2. إنشاء فرع جديد للميزة
3. تطبيق التغييرات
4. إرسال Pull Request

## الدعم

للحصول على المساعدة أو الإبلاغ عن مشاكل، يرجى فتح Issue في المستودع.

---

**ملاحظة**: هذا المشروع تعليمي وقد لا يعكس الفيزياء الجزيئية الحقيقية بدقة 100%. استخدمه للتعلم والاستكشاف!

